<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeatMaster - MIDI Drum Rhythm Game</title>
    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü•Å</text></svg>">
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Black+Han+Sans&display=swap"
        rel="stylesheet">
    <!-- Tone.js MIDI Library -->
    <script src="https://unpkg.com/@tonejs/midi"></script>
</head>

<body>
    <div id="app">
        <!-- Overlay for Start/Pause -->
        <div id="overlay" class="visible">
            <div class="glass-panel">
                <h1 class="logo">BEAT<span>MASTER</span></h1>
                <p class="tagline">Premium MIDI Drum Experience</p>

                <div class="controls-grid">
                    <div class="control-item">
                        <label>Í≥° ÏÑ†ÌÉù (Internal)</label>
                        <select id="song-select">
                            <option value="">ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                            <!-- JSÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞Ä -->
                        </select>
                    </div>
                    <div class="control-item">
                        <label>MIDI ÏóÖÎ°úÎìú</label>
                        <input type="file" id="midi-upload" accept=".mid,.midi">
                    </div>
                </div>

                <div class="settings-row">
                    <div class="setting-item">
                        <label>ÎÇúÏù¥ÎèÑ ÏÑ§Ï†ï</label>
                        <div id="difficulty-select" class="btn-group">
                            <button class="difficulty-btn" data-value="EASY">EASY</button>
                            <button class="difficulty-btn active" data-value="NORMAL">NORMAL</button>
                            <button class="difficulty-btn" data-value="HARD">HARD</button>
                        </div>
                    </div>
                </div>

                <div class="settings-row">
                    <div class="setting-item">
                        <label>ÎÖ∏Ìä∏ ÏÜçÎèÑ</label>
                        <input type="range" id="scroll-speed" min="1" max="10" value="3" step="0.5">
                        <span id="speed-value">3.0</span>
                    </div>
                </div>

                <button id="start-btn" class="primary-btn">START SESSION</button>
            </div>
        </div>

        <!-- Game Interface -->
        <main id="game-container">
            <div id="hud">
                <div class="score-container">
                    <span class="label">SCORE</span>
                    <span id="score">000000</span>
                </div>
                <div class="combo-container">
                    <span id="combo">0</span>
                    <span class="label">COMBO</span>
                </div>
            </div>

            <div id="judgment-display"></div>

            <canvas id="game-canvas"></canvas>

            <!-- Touch Zones for Mobile & Hand-feel -->
            <div id="touch-zones">
                <div class="touch-zone" data-lane="0">
                    <div class="lane-label">KICK<span>(D)</span></div>
                    <div class="touch-effect"></div>
                </div>
                <div class="touch-zone" data-lane="1">
                    <div class="lane-label">SNARE<span>(F)</span></div>
                    <div class="touch-effect"></div>
                </div>
                <div class="touch-zone" data-lane="2">
                    <div class="lane-label">CLAP<span>(J)</span></div>
                    <div class="touch-effect"></div>
                </div>
                <div class="touch-zone" data-lane="3">
                    <div class="lane-label">HAT<span>(K)</span></div>
                    <div class="touch-effect"></div>
                </div>
            </div>

            <div id="action-bar">
                <button id="pause-btn" class="icon-btn">II</button>
                <div class="progress-bar-bg">
                    <div id="progress-bar-fill"></div>
                </div>
                <span id="time-display">00:00 / 00:00</span>
                <button id="fullscreen-btn" class="icon-btn">FS</button>
            </div>
        </main>

        <!-- Debug Console -->
        <div id="debug-console"></div>
    </div>

    <script type="module">
        import(`./main.js?v=${Date.now()}`);
    </script>
</body>

</html>